<script>

  class Shopping {
    constructor(Sname, price, number) {
      this.Sname = Sname;
      this.price = price;
      this.number = number;

    }
    commodity() {
      console.log('商品：' + this.Sname + ' ' + '价格:' + this.price + '元' + ' ' + '数量:' + this.number + '瓶。');
    }
  }
  var sh = new Shopping('哇哈哈', 2, 5);
  sh.commodity();



  //商品类
  class Product {
    constructor(id, Sname, imgSRC, price) {
      // 商品类成员
      this.id = id;
      this.Sname = Sname;
      this.imgSRC = imgSRC;
      this.price = price;
    }
  }

  // 访问商品对象
  // console.log(product1)
  // // .形式访问商品对象的属性
  // console.log(product1.id);
  // // 下标形式访问商品对象
  // console.log(product1['id']);


  // 订单类
  class Order {
    constructor(product, qty) {
      // 订单类成员
      // this.product = product;
      // this.qty = qty;
      this.id = product.id;
      this.Sname = product.Sname;
      this.price = product.price;
      this.imgSRC = product.imgSRC;
      this.qty = qty;
    }
  }
  // // 创建订单对象
  // var order = new Order(product1, 5);
  // 获得订单对象
  // console.log(order);
  //  获得订单对象的product属性
  // console.log(order.product);
  // // 获得订单对象的product属性的二级属性name/price
  // console.log(order.product.Sname);
  // console.log(order.product.price);




  //第二个订单
  // var order2 = new Order(product2, 10);
  // console.log(order2);
  // console.log(order2.product);
  // console.log(order2.product.Sname);
  // console.log(order2.product.price);


  // var order3=new Order();
  // order3.push(product);
  // console.log(order3[0].Sname);

  // console.log(order3);
  // var array=[new Order('01', '哇哈哈', 'images/2.png', 5),new Order('02', '信息', 'images/2.png',10)];
  // console.log(array[1].Sname);
  // console.log(array);


  // 购物车数据类---确定格式
  class Cartdata {
    // 数据成员 订单列表 总样本 总件数 总金额
    constructor() {
      this.orderList = new Array();
      this.units = 0;//总样本
      this.totalQty = 0;//总件数
      this.totalAmount = 0;//总金额
    }
  }

  // 函数定义--将某个订单order，加入购物车
  function addtoCart(order) {
    // 订单2进购物车进myCart

    var isNewProduct = false;//假设isOldProduct是假，代表当前状态是新商品
    for (const i in myCart.orderList) {//遍历数组
      if (order.id == myCart.orderList[i].id) {
        isNewProduct = true;//新近订单的ID与购物车中某个商品的id相等，是购物车中已经存在的商品，修改状态
        // 新增对应qty
        myCart.orderList[i].qty += order.qty;
        break;
      }
    }
    if (!isNewProduct) {
      //  order是购物车中的新商品，给样本数++
      myCart.orderList.push(order);
      myCart.units++;
    }
    myCart.totalQty += order.qty;
    myCart.totalAmount = order.price * order.qty;

  }

  // 商品对象/实例
  var product1 = new Product('01', '娃哈哈', 'images/2.png', 5.00);
  var product2 = new Product('02', '信息', 'images/2.png', 10);


  // 实例化购物车数据---订单1进购物车myCart
  var myCart = new Cartdata();

  var order = new Order(product1, 5);
  addtoCart(order);//调用假日购物车函数
  // myCart.orderList.push(order);
  // myCart.units = 1;
  // myCart.totalQty = order.qty;
  // myCart.totalAmount = order.price * order.qty;
  // console.log(myCart);

  order = new Order(product2, 3);
  addtoCart(order);//调用假日购物车函数
  console.log(myCart);

  order = new Order(product2, 1);
  addtoCart(order);//调用假日购物车函数
  console.log(myCart);

</script>